# ğŸŸ© Vue2 åº•å±‚åŸç† Object.defineProperty

::: tip æ¨èå­¦ä¹ 
bç«™è§†é¢‘ï¼š[ å°šç¡…è°· | P11 P12 P13 ](https://www.bilibili.com/video/BV1Zy4y1K7SH?p=11&vd_source=3f0088ad79c805c26d24a196ef28e918)  
bç«™è§†é¢‘ï¼š[ å°šç¡…è°· | P34 P35 P36 ](https://www.bilibili.com/video/BV1Zy4y1K7SH?p=34&vd_source=3f0088ad79c805c26d24a196ef28e918)
:::
å…¶å®åœ¨åˆšå¼€å§‹å­¦ä¹  Vueï¼Œä»¥åŠåšé¡¹ç›®çš„æ—¶å€™å¯ä»¥æš‚æ—¶ä¸äº†è§£åº•å±‚åŸç†ã€‚  
ä½†æ˜¯æ¯•ç«Ÿæ˜¯å­¦ä¹ å˜›ï¼Œåˆ°åé¢è¿˜æ˜¯éœ€è¦æŠŠåº•å±‚åŸç†äº†è§£ä¸€ä¸‹çš„

åƒ Vue çš„æ•°æ®ç»‘å®šï¼ŒåŒå‘ç»‘å®šä»¥åŠè®¡ç®—å±æ€§... éƒ½å’Œè¿™ä¸ª`Object.defineProperty`æ¯æ¯ç›¸å…³ï¼Œè¿™ä¸ª `Object.defineProperty` ä¹Ÿæ˜¯åœ¨ ES6 åå‡ºæ¥çš„æ–°ä¸œè¥¿ï¼å€Ÿç€è¿™ä¸ªæœºä¼šï¼Œæˆ‘åšåšç¬”è®°ã€‚

ç”¨ä¸€ä¸ªç®€å•çš„ index.html æ–‡ä»¶æ¥è®°å½•ä¸€ä¸‹ `Object.defineProperty` çš„åŸºæœ¬ä½œç”¨

### ğŸŸ© ç¬¬ä¸€ç§ï¼šç›´æ¥å®šä¹‰æ•°æ®

```html
<script type="text/javascript">
  let person = {
    name: "è°¢å¤æˆˆ",
    sex: "ç”·",
    age: 26,
  };

  console.log(person);
</script>
```

### ğŸŸ© ç¬¬äºŒç§ï¼š `Object.defineProperty` 

```html
<script type="text/javascript">
  let person = {
    name: "è°¢å¤æˆˆ",
    sex: "ç”·",
    // age:26
  };

  Object.defineProperty(person, "age", {
    value: 18,
  });

  console.log(person);
</script>
```

![å›¾ 7](img/63249ece38b041e9bc19463df09ac7437962b3526d096f6424c26c7cfff12b53.png)![å›¾ 8](img/1d0824851c78906c81abc7b8aeb36eeae8c1a2dc59bc4df0602f8a778c352dd8.png)

ä»–ä»¬ä¹‹å‰çš„åŒºåˆ«åœ¨äº
1. é€šè¿‡ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°æ®ï¼Œã€ä¸å‚ä¸éå†ã€æšä¸¾ã€‘
2. é€šè¿‡ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°æ®ï¼Œã€ä¸èƒ½è¢«ä¿®æ”¹ã€‘
3. é€šè¿‡ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°æ®ï¼Œã€ä¸èƒ½è¢«åˆ é™¤..ã€‘

```js
//éå†ä¸å‡ºæ¥
for(let index in person){
  console.log(person[index])
}
// è°¢å¤æˆˆ
// ç”·
// æ²¡æœ‰18

//éå†ä¸å‡ºæ¥
console.log(Object.keys(person));
// name
// sex
// æ²¡æœ‰age
```
ğŸ‘‡ æ²¡æœ‰å¹´é¾„  

![å›¾ 11](img/4f70e0f86d742ea3014234776d5e42a97006cb5a5748ce04af5797e34d1a5e05.png)  



#### ğŸŸ© `enumerable` æšä¸¾

å¦‚æœéœ€è¦ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°å¯ä»¥è¢«ã€éå†ã€‘ã€æšä¸¾ã€‘å°±ä½¿ç”¨ `enumerable`
```js
Object.defineProperty(person, "age", {
  value: 18,
  enumerable:true, // æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ï¼Œé»˜è®¤false
});
```

#### ğŸŸ© `writable` ä¿®æ”¹
å¦‚æœéœ€è¦ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°å¯ä»¥è¢«ã€ä¿®æ”¹ã€‘å°±ä½¿ç”¨ `writable`
```js
Object.defineProperty(person, "age", {
  value: 18,
  enumerable:true, // æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ï¼Œé»˜è®¤false
  writable:true, //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤false
});
```

#### ğŸŸ© `configurable` åˆ é™¤
å¦‚æœéœ€è¦ `Object.defineProperty` ä»£ç†è¿›å»çš„æ•°å¯ä»¥è¢«ã€ä¿®æ”¹ã€‘å°±ä½¿ç”¨ `configurable`

```js
Object.defineProperty(person, "age", {
  value: 18,
  enumerable:true, // æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ï¼Œé»˜è®¤false
  writable:true, //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤false
  configurable:true, //æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œé»˜è®¤false
});
```

::: tip 
ä¹Ÿå°±æ˜¯è¯´ `Object.defineProperty` æ˜¯å¯æ§çš„ï¼
:::
## ğŸŸ© `Object.defineProperty` çš„ `get` å’Œ `set`
1. è¯»å–personçš„ageå±æ€§çš„æ—¶å€™ï¼Œgetå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›ageå€¼
2. ä¿®æ”¹personçš„ageå±æ€§çš„æ—¶å€™ï¼Œsetå‡½æ•°å°±ä¼šè¢«è°ƒç”¨
```js
let number  = 18
let person = {
  name: "è°¢å¤æˆˆ",
  sex: "ç”·",
  // age:26
};

Object.defineProperty(person, "age", {
  get(){
    return number
  }
  set(value){
    number = value
  }
});
```

## ğŸŸ© Vueä¸­çš„ `Object.defineProperty` - æ•°æ®ä»£ç†

1. Vueä¸­çš„æ•°æ®ä»£ç†ï¼š
   1. é€šè¿‡vmå¯¹è±¡æ¥ä»£ç†dataå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»/å†™ï¼‰
   2. ã€vmæ˜¯æ•´ä¸ªVueçš„å®ä¾‹ã€‘
2. Vueä¸­æ•°æ®ä»£ç†çš„å¥½å¤„ï¼š
   1. æ›´åŠ æ–¹ä¾¿çš„æ“ä½œdataä¸­çš„æ•°æ®
3. åŸºæœ¬åŸç†ï¼š
   1. é€šè¿‡ `Object.defineProperty` æŠŠdataå¯¹è±¡ä¸­æ‰€æœ‰å±æ€§æ·»åŠ åˆ°vmä¸Šï¼Œä¸ºæ¯ä¸€ä¸ªæ·»åŠ åˆ°vmä¸Šçš„å±æ€§ï¼Œéƒ½æŒ‡å®šä¸€ä¸ª `getter/setter`ã€‚åœ¨`getter/setter` å†…éƒ¨å»æ“ä½œï¼ˆè¯»/å†™ï¼‰dataä¸­å¯¹åº”çš„å±æ€§ã€‚


![å›¾ 9](img/1dce08727a27816af06f113481781fe9a90fc501221b76b7ddaa129910415c84.png)  

- ` vm._data = data = æ•°æ®åŠ«æŒ`
::: tip
ä¹Ÿå°±æ˜¯è¯´ å½“ä½ åœ¨ data è¿™ä¸ªå±æ€§é‡Œè®¾ç½®æ•°æ®çš„æ—¶å€™ï¼ŒVue æ‹¿ç€è¿™äº›æ•°æ® å»åšã€æ•°æ®ä»£ç†ã€‘ã€‚
1. ä¸€æ¥ï¼Œå½“ä½ åœ¨æ“ä½œjsçš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¸€æ ·åªæœ‰jsé‚£éƒ¨åˆ†æ˜¯å˜åŠ¨çš„ã€‚
2. äºŒæ¥ï¼Œé€šè¿‡ `Object.defineProperty` é‡Œçš„setï¼ŒVueå·å·æ‹¿ç€ä½ æ”¹æ‰çš„æ•°æ®å»æ”¹åŠ¨è¦å±•ç¤ºçš„HTMLæ¨¡æ¿ï¼Œä»¥æ­¤æ¥è¾¾åˆ°å“åº”å¼çš„æ•ˆæœï¼

æ‰€ä»¥ Vue  å°±ä»¥æ­¤ è¾¾åˆ°MVVMçš„æ•ˆæœäº†ï¼ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ ä½ åªéœ€è¦å¤„ç† jsæ•°æ®ï¼Œviewå±•ç¤ºçš„éƒ¨åˆ†äº¤ç»™Vueï¼Œå’±å†ä¹Ÿä¸ç”¨æ“ä½œDOMå…ƒç´ äº†~
:::

## ğŸŸ© Vueæ£€æµ‹æ•°æ®æ”¹å˜çš„åŸç† - æ•°æ®åŠ«æŒ

::: tip æ¨èå­¦ä¹ 
bç«™è§†é¢‘ï¼š[ å°šç¡…è°· | P34 P35 P36 ](https://www.bilibili.com/video/BV1Zy4y1K7SH?p=34&vd_source=3f0088ad79c805c26d24a196ef28e918)
:::

- ä¼ å…¥dataçš„æ•°æ®ï¼Œéƒ½æ˜¯ä»¥ã€æ•°æ®ä»£ç†ã€‘çš„æ–¹å¼ä¿å­˜åœ¨vueå®ä¾‹ï¼ˆvmï¼‰é‡Œçš„ï¼Œåœ¨ä¿å­˜ä¹‹å‰Vueè¿˜åšäº†ã€æ•°æ®åŠ«æŒã€‘ä»¥æ­¤æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–

å½“ä½ ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œ`Object.defineProperty` é‡Œçš„ `set` ç›‘å¬åˆ°ååšäº†ä¸€ç³»åˆ—æ“ä½œï¼Œå…¶ä¸­å°±åŒ…æ‹¬æŠŠä»£ç†çš„æ•°æ®æ›´æ–°åˆ°é¡µé¢æ¨¡æ¿ä¸Šå»ï¼Œä»¥æ­¤æ¥å“åº”å¼çš„æ›´æ–°é¡µé¢ï¼


![å›¾ 10](img/ab9feb6df8ca89315d99f22c077378706ac0ceda6ee3f2e949485b439842b8ba.png)  

## ğŸŸ© Vue.set

1. ç›´æ¥åœ¨vmä¸Š åŠ å…¥æ•°æ®æ˜¯ä¸ä¼šæœ‰å“åº”å¼çš„
2. å› ä¸ºvmä¸Šæ‰€æœ‰çš„æ•°æ®éƒ½æ¥è‡ª `_data` ä¹Ÿå°±æ˜¯ `data`
3. æ‰€ä»¥Vueæä¾›äº†ä¸€ä¸ª `Vue.set` æ¥è®©ä½ å¯ä»¥ è¿½åŠ  - å“åº”å¼æ•°æ®

![å›¾ 12](img/e8268d53cf587109ee4a214d1937e5b5886dff22b86d70de48b4642ddc0f95d7.png)  

![å›¾ 13](img/2a9c972c0a69d0a53cb7af9474d4ff9ee9749f66d405325e632be9813ba01059.png)  

`Vue.set` å’Œ `vm.$set`

## ğŸŸ© Vueç›‘å¬æ•°ç»„çš„åŸç†
![å›¾ 15](img/06e41127c66329f2b578ba8afb4ac157eab3bf139164946bb323eb4367160adf.png)  

å¯ä»¥çœ‹åˆ°åœ¨`data`ä¸­å®šä¹‰çš„æ•°ç»„é‡Œ æ•°æ®ä»£ç† å¹¶æ²¡æœ‰ `setter` å’Œ `getter`
æ‰€ä»¥åœ¨Vueä¸­æ— æ³•ç›´æ¥ä¿®æ”¹æ•°ç»„é‡Œçš„å€¼ï¼ˆå¯ä»¥ç”¨pushã€popã€shift...è¿™äº›æ–¹æ³•ï¼‰

ğŸ‘‡ ä»¥ä¸‹ä¿®æ”¹ä¼šå¤±è´¥ï¼ï¼ˆæ— æ³•å“åº”å¼ï¼‰ï¼ï¼ï¼
![å›¾ 16](img/4e4e0bb90f805214436f799b9846e5b8858622d5ac09ad059d8d89ab994b5a0c.png)  
- ä¸èƒ½ç›´æ¥æ ¹æ®ã€ç´¢å¼•ã€‘æ¥ä¿®æ”¹å€¼ï¼Œæ— æ³•å“åº”å¼æ›´æ–°
- ä½†æ˜¯ä½¿ç”¨pushã€popè¿™äº›æ”¹å˜æ•°ç»„çš„æ–¹æ³•å´å¯ä»¥å®Œæˆå“åº”å¼æ›´æ–°

é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Vue å¦‚ä½•ç›‘å¬æ•°ç»„è¢« pushã€pop... äº†ï¼Ÿ

####  ğŸŸ© Vue å¦‚ä½•ç›‘å¬æ•°ç»„è¢« pushã€pop... äº†

1. åŸç†æ˜¯Vueçš„åº•å±‚æŠŠæ•°ç»„çš„pushè¿›è¡Œã€åŒ…è£…ã€‘ğŸ‘‡

![å›¾ 17](img/ee04181151342c2bc9f534b893b0d991bec0987b7e98003d604980814865d435.png)  

è¿™ä¸ªåŒ…è£…
1. ä¸€æ–¹é¢è¿˜æ˜¯ä¸€æ ·è€è€å®å®è¿›è¡Œäº†æ•°æ®çš„push
2. å¦ä¸€æ–¹é¢å»å¸®å¿™æ¸²æŸ“æ¨¡æ¿é‡Œçš„æ•°æ®äº†


ä¹Ÿå°±æ˜¯å…¶å®è¿™ä¸ªpushæ˜¯ä¸ªåŒ…è£…ï¼ŒåŒ…è£…é‡Œç¬¬ä¸€æ­¥è¿˜æ˜¯åŸæ¥é‚£ä¸ªæ²¡æœ‰å“åº”å¼çš„pushï¼Œç¬¬äºŒæ­¥å†å»æ›´æ–°æ¨¡æ¿æ•°æ®ã€‚
![å›¾ 18](img/f7ee2a5db9dd596035b48bcf0faa39ee39551d955727070992ae91115bfb0d80.png)  

#### ğŸŸ© æ›¿æ¢æ•°ç»„

ä»¥ä¸Š 7ç§ å˜æ›´æ•°ç»„ çš„æ–¹æ³• éƒ½æ˜¯å› ä¸ºæœ¬èº«å°±ä¼šã€ä¿®æ”¹åŸæ•°ç»„ã€‘   
ä½†æ˜¯è¿˜æœ‰å…¶ä»–ä¸€äº›ã€æ•°ç»„æ–¹æ³•ã€‘ä»–ä»¬æ˜¯ä¸ä¼šä¿®æ”¹ã€åŸæ•°ç»„ã€‘çš„  

ä¾‹å¦‚è¯´`filter` `concat` `slice` ä»–ä»¬åªä¼šè¿”å›ä¸€ä¸ªã€æ–°çš„æ•°ç»„ã€‘

è¿™æ—¶å€™å¯ä»¥ç”¨ã€æ–°æ•°ç»„ã€‘æŠŠè¿™ä¸ªã€æ—§æ•°ç»„ã€‘æ›¿æ¢æ‰ï¼

### ğŸŸ© æ•°ç»„æ€»ç»“

1. ä¸èƒ½åœ¨å¯¹ data é‡Œé¢çš„ æ•°ç»„ è¿›è¡Œ ç›´æ¥ã€èµ‹å€¼ã€‘çš„ä¿®æ”¹
2. åœ¨Vue è¦æ”¹å˜æ•°ç»„é‡Œé¢çš„å€¼ è¦ä½¿ç”¨ä»¥ä¸Šè¿™ä¸ƒä¸ªæ–¹æ³•ï¼